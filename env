# Set TERM (for tmux)
if [[ "$TERM" == "xterm" ]]; then
  TERM="xterm-256color"
fi

# Load RVM into a shell session as a function*
if [[ -s "$HOME/.rvm/scripts/rvm" ]]; then
  source "$HOME/.rvm/scripts/rvm"
fi

# Load NVM
if [[ -s "$HOME/.nvm/nvm.sh" ]]; then
  source "$HOME/.nvm/nvm.sh"
fi

# Set env specific variables
if [[ $(uname) = Darwin ]]; then
  HOMEBREW_PATH=/usr/local
  NPM_BIN=/usr/local/share/npm/bin
else
  JAVA_HOME=/usr/local/java/jdk1.7.0_17
  HADOOP_INSTALL=$HOME/Developer/lib/hadoop-1.1.2
  HEROKU_PATH=/usr/local/heroku
  SBT_PATH=$HOME/Developer/lib/sbt
  RVM_PATH=$HOME/.rvm
fi

# Build PATH
# Homebrew
if [[ -n "$HOMEBREW_PATH" && -d "$HOMEBREW_PATH/bin" ]]; then
  export PATH=$HOMEBREW_PATH/bin:$PATH
fi

# Binaries installed by NPM
if [[ -n "$NPM_BIN" && -d "$NPM_BIN" ]]; then
  export PATH=$PATH:$NPM_BIN
fi

# Java
if [[ -n "$JAVA_HOME" && -d "$JAVA_HOME/bin" ]]; then
  export PATH=$PATH:$JAVA_HOME/bin
fi

# Hadoop
if [[ -n "$HADOOP_INSTALL" && -d "$HADOOP_INSTALL/bin" && -d "$HADOOP_INSTALL/sbin" ]]; then
  export PATH=$PATH:$HADOOP_INSTALL/bin:$HADOOP_INSTALL/sbin
fi

# Heroku
if [[ -n "$HEROKU_PATH" && -d "$HEROKU_PATH/bin" ]]; then
  export PATH=$PATH:$HEROKU_PATH/bin
fi

# Scala Build Tool
if [[ -n "$SBT_PATH" && -d "$SBT_PATH/bin" ]]; then
  export PATH=$PATH:$SBT_PATH/bin
fi

# Add Ruby RVM
if [[ -n "$RVM_PATH" && -d "$RVM_PATH/bin" ]]; then
  export PATH=$PATH:$RVM_PATH/bin
fi

# personal bin
if [ -d "$HOME/Developer/bin" ]; then
  export PATH=$PATH:$HOME/Developer/bin
fi

# add personal lib
if [ -d "$HOME/Developer/lib" ]; then
  if [ -n "$LD_LIBRARY_PATH" ]; then
    LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$HOME/Developer/lib
  else
    LD_LIBRARY_PATH=$HOME/Developer/lib
  fi
  export LD_LIBRARY_PATH
fi

# mac specific settings
if [ $(uname) = Darwin ]; then
  # set vim to always use mvim
  alias vim='mvim -v'
fi

# Run local env commands if they exist
if [ -f ~/.env.local ]; then
    source ~/.env.local
fi
